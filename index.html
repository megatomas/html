<!DOCTYPE html>
<html>
  <head>
    <title>Форма ввода</title>
    <link rel="stylesheet" type="text/css" href="styles.css">
  </head>
  <body>
    <form enctype="multipart/form-data">
      <div>
        <input type="text" id="fullname" name="fullname" placeholder="Клиент">
        <textarea id="address" name="address" placeholder="Адрес"></textarea>
        <input type="text" id="phone" name="phone" placeholder="Телефон" value="+7">
        <select id="type" name="type">
          <option value="hot_water">Горячая вода</option>
          <option value="cold_water">Холодная вода</option>
        </select>
        <input type="text" id="model" name="model" placeholder="Модификация">
        <input type="text" id="serial" name="serial" placeholder="Заводской номер">
        <input type="text" id="year" name="year" placeholder="Год выпуска">
        <input type="text" id="reading" name="reading" placeholder="Показания">
      </div>
    <div id="error"></div>
      <div>
        <button type="submit" id="submit">Отправить</button>
        <button type="reset" id="reset">Отмена</button>
      </div>
    </form>
   <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script>
    let tg = window.Telegram.WebApp;
    let submit = document.getElementById("submit");
    let reset = document.getElementById("reset");

    let fullname = document.getElementById("fullname");
    let phone = document.getElementById("phone");
    let type = document.getElementById("type");
    let model = document.getElementById("model");
    let serial = document.getElementById("serial");
    let year = document.getElementById("year");
    let reading = document.getElementById("reading");
    tg.expand();

    submit.addEventListener("click", () => {
    document.getElementById("error").interText = '';
    if (fullname.length < 1) {
      document.getElementById("error").interText = 'Ошибка в имени';
      return;
    }

    if (address.length < 1) {
      document.getElementById("error").interText = 'Ошибка в адресе';
      return;
    }

    if (phone.length < 12) {
      document.getElementById("error").interText = 'Ошибка в телефоне';
      return;
    }

    if (model.length < 1) {
      document.getElementById("error").interText = 'Ошибка в моделе';
      return;
    }

    if (serial.length < 1) {
      document.getElementById("error").interText = 'Ошибка в серии';
      return;
    }

    if (year.length < 1) {
      document.getElementById("error").interText = 'Ошибка в годе';
      return;
    }

    if (reading.length < 1) {
      document.getElementById("error").interText = 'Ошибка в показаниях';
      return;
    }
      let data = {
        fullname: fullname.value,
        address: document.getElementById("address").value,
        phone: document.getElementById("phone").value,
        type: document.getElementById("type").value,
        model: document.getElementById("model").value,
        serial: document.getElementById("serial").value,
        year: document.getElementById("year").value,
        reading: document.getElementById("reading").value
      };
      tg.sendData(JSON.stringify(data));
      tg.close();
    });

    reset.addEventListener("click", () => {
      tg.close();
    });
    </script>
  </body>
</html>
